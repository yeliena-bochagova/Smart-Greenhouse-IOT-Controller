@model IEnumerable<SmartGreenhouse.Web.Models.Measurement>

@{
    ViewData["Title"] = "–†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –ø–æ—à—É–∫—É";
}

<div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h2>üìä –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –ø–æ—à—É–∫—É</h2>
        <a asp-action="Index" class="btn btn-secondary">
            <i class="bi bi-arrow-left"></i> –ù–æ–≤–∏–π –ø–æ—à—É–∫
        </a>
    </div>

    @if (!Model.Any())
    {
        <div class="alert alert-warning shadow-sm border-0">
            <h4 class="alert-heading"><i class="bi bi-exclamation-circle"></i> –ù—ñ—á–æ–≥–æ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ</h4>
            <p>–°–ø—Ä–æ–±—É–π—Ç–µ –∑–º—ñ–Ω–∏—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —Ä–æ–∑—à–∏—Ä–∏—Ç–∏ –¥—ñ–∞–ø–∞–∑–æ–Ω –¥–∞—Ç.</p>
        </div>
    }
    else
    {
        <div class="card shadow-sm">
            <div class="card-header bg-dark text-white d-flex justify-content-between">
                <span>–ó–Ω–∞–π–¥–µ–Ω–æ –∑–∞–ø–∏—Å—ñ–≤: <strong>@Model.Count()</strong></span>
                <small class="text-white-50">–ü–æ–∫–∞–∑–∞–Ω–æ —Ç–æ–ø-500</small>
            </div>
            <div class="card-body p-0">
                <table class="table table-hover mb-0 align-middle text-center">
                    <thead class="table-light">
                        <tr>
                            <th class="text-start ps-4">–ß–∞—Å</th>
                            <th class="text-start">–°–µ–Ω—Å–æ—Ä / –†–æ—Å–ª–∏–Ω–∞</th>
                            <th>–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞</th>
                            <th>–í–æ–ª–æ–≥—ñ—Å—Ç—å</th>
                            <th>–°–≤—ñ—Ç–ª–æ</th>
                            <th>–î—ñ—ó</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in Model)
                        {
                            <tr>
                                <td class="text-start ps-4">
                                    <div class="fw-bold">@item.Timestamp.ToLocalTime().ToString("d")</div>
                                    <small class="text-muted">@item.Timestamp.ToLocalTime().ToString("T")</small>
                                </td>
                                <td class="text-start">
                                    <div class="fw-bold text-primary">@item.Sensor?.Name</div>
                                    <small class="text-muted">@(item.Sensor?.Plant?.Name ?? "-")</small>
                                </td>
                                <td>
                                    <span class="badge bg-danger bg-opacity-10 text-danger border border-danger">
                                        @item.Temperature.ToString("F1") ¬∞C
                                    </span>
                                </td>
                                <td>
                                    <span class="badge bg-info bg-opacity-10 text-info border border-info">
                                        @item.Humidity.ToString("F1") %
                                    </span>
                                </td>
                                <td>
                                    <span class="badge bg-warning bg-opacity-10 text-warning border border-warning">
                                        @item.Light.ToString("F0") Lx
                                    </span>
                                </td>
                                <td>
                                    <a href="/Measurements/Details/@item.Id" target="_blank" class="btn btn-sm btn-outline-secondary">
                                        <i class="bi bi-eye"></i>
                                    </a>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
    }
</div>